\chapter{Transfer Function}
Transfer Function is the ratio of Laplace Transform of Output of the system to the Laplace Transform of Input of the system, when all the initial condition are assumed to be zero. (Very important that if it is not zero then the system is not Linear Time Invariant)(We can not take a Laplace Transform of a nonlinear system).
Let:
\begin{itemize}
	\item {\makebox[1cm]{\(x(t)\)\hfill} is Input of the system}
	\item {\makebox[1cm]{\(y(t)\)\hfill} is Output of the system}
	\item {\makebox[1cm]{\(h(t)\)\hfill} is the system}
\end{itemize}
We have:
\begin{equation}
	y(t) = x(t)*h(t)
\end{equation}
Taking Laplace Transform, We get:
\begin{equation}
	Y(s) = X(s)*H(s)
\end{equation}
By convolution property:
\begin{equation}
	\boxed{H(s) = \frac{Y(s)}{X(s)}}
\end{equation}

\section{Example of Determine a Transfer Function}
\paragraph{System 1} Determine a Transfer Function of a system below:
\[\frac{d^2y(t)}{d t^2} + 3\frac{dy(t)}{d t} + 2 y(t) = x(t)\]
\paragraph{Solution} We have:
\begin{itemize}
	\item {\makebox[1cm]{\(x(t)\)\hfill} is Input of the system}
	\item {\makebox[1cm]{\(y(t)\)\hfill} is Output of the system}
\end{itemize}
Taking Laplace Transform of the system:
\[\mathcal{L}[\frac{d^2y(t)}{d t^2} + 3\frac{dy(t)}{d t} + 2 y(t)] = \mathcal{L}[x(t)]\]
We get:
\[\mathcal{L}[\frac{d^2y(t)}{d t^2}] = s^2Y(s) - sY(0^-) -y'(0^-)\]
\[\mathcal{L}[3\frac{dy(t)}{d t}] = 3[sY(s) - y(0)]\]
\[\mathcal{L}[2 y(t)] = 2Y(s)\]
\[\mathcal{L}[X(t)] = X(s)\]
\[s^2Y(s) - sY(0^-) -y'(0^-) + 3[sY(s) - y(0)] + 2Y(s) = X(s)\]
Put Initial Condition to zero, we get:
\[s^2Y(s) + 3sY(s) + 2Y(s) = X(s)\]
\[Y(s)[s^2 + 3s +2 ] = X(s)\]
\[\rightarrow \frac{Y(s)}{X(s)} = \frac{1}{s^2 + 3s +2}\]
\[\rightarrow H(s) = \frac{1}{s^2 + 3s +2}\]
\[\rightarrow \boxed{H(s) = \frac{1}{(s+1)(s+2)}}\]


\paragraph{System 2} Determine a Transfer Function of a system below:
\[\dot{\phi}(t) = k(\phi_{ref}(t) - \phi(t))\]
\paragraph{Solution}
\[\frac{1}{k}\dot{\phi}(t) = \phi_{ref}(t) - \phi(t)\]
\[\frac{1}{k}\dot{\phi}(t) + \phi(t) = \phi_{ref}(t)\]
Taking Laplace Transform of the system:
\[\mathcal{L}[\frac{1}{k}\dot{\phi}(t) + \phi(t)] = \mathcal{L}[\phi_{ref}(t)]\]
We have:
\begin{itemize}
	\item {\makebox[1.5cm]{\(\phi_{ref}(t)\)\hfill} is Input of the system}
	\item {\makebox[1.5cm]{\(\phi(t)\)\hfill} is Output of the system}
\end{itemize}
\[\frac{1}{k}sY(s) + Y(s) = X(s)\]
\[Y(s)[\frac{1}{k}s +1] = X(s)\]
\[\rightarrow \frac{Y(s)}{X(s)} = \frac{1}{\frac{1}{k}s + 1}\]
\[\rightarrow \boxed{H(s) = \frac{1}{\frac{1}{k}s + 1}}\]



\paragraph{System 3} Determine a Transfer Function of a system below:
\[\ddot{\phi}(t) = k(\phi_{ref}(t) - \phi(t))\]
\paragraph{Solution}
\[\frac{1}{k}\ddot{y}(t) + y(t) = x(t)\]
Taking Laplace Transform of the system:
\[\mathcal{L}[\frac{1}{k}\ddot{y}(t) + y(t)] = \mathcal{L}[x(t)]\]
\[\frac{1}{k}s^2Y(s) + Y(s) = X(s)\]
\[Y(s)[\frac{1}{k}s^2 + 1] = X(s)\]
\[\rightarrow \boxed{H(s) = \frac{1}{\frac{1}{k}s^2 + 1}}\]


\paragraph{System 4} Determine a Transfer Function of a system below:
\[\ddot{y}(t) + ky(t)= kx(t)\]
\paragraph{Solution}
Taking Laplace Transform of the system:
\[s^2Y(s) + kY(s) = kX(s)\]
\[Y(s)[s^2 + k] = kX(s)\]
\[\rightarrow \boxed{H(s) = \frac{k}{s^2 + k}}\]


\section{Example of Determine System from TF}
Below is a system transfer function that transfer wheel position $\theta$ to wheel velocity $\dot{\theta}$. Determine the system function and discretize it.
We have a TF:
\[\frac{Y(s)}{X(s)} = \frac{s}{as + 1}\]
\[(as + 1)Y(s) = sX(s)\]
\[asY(s) + Y(s) = sX(s)\]
Taking a Reverse Laplace Transform:
\[a\dot{y}(t) + y(t) = \dot{x}(t)\]
\[\rightarrow \boxed{\dot{y}(t) = -\frac{1}{a}y(t) + \frac{1}{a}\dot{x}(t)}\]
Discretize the model:
\[\frac{y_{k+1}- y_k}{T_s} = -\frac{1}{a}y_k + \frac{1}{a}\frac{x_{k+1}- x_k}{T_s}\]
\[y_{k+1}- y_k = -\frac{T_s}{a}y_k + \frac{1}{a}(x_{k+1}- x_k)\]
\[y_{k+1} = y_k - \frac{T_s}{a}y_k + \frac{1}{a}(x_{k+1}- x_k)\]
\[y_{k+1} = (1- \frac{T_s}{a})y_k + \frac{1}{a}(x_{k+1}- x_k)\]
\[\rightarrow \boxed{\dot{\theta}_{k+1} = (1- \frac{T_s}{a})\dot{\theta}_k + \frac{1}{a}(\theta_{k+1}- \theta_k)}\]